<div class="p-4">
  <button (click)="onAdd()" class="bg-green-600 text-white px-4 py-2 rounded mb-4 hover:bg-green-700">
    Th√™m playlist
  </button>

<ul class="space-y-2">
  <li *ngFor="let playlist of playlists" class="p-4 border rounded">
    <div class="flex justify-between items-center">
      <div>
        <strong>{{ playlist.name }}</strong> <br />
        <span class="text-sm text-gray-500">({{ playlist.tracks?.length || 0 }} b√†i h√°t)</span>
      </div>
      <div class="space-x-2">
        <button (click)="toggleExpand(playlist.id)" class="bg-blue-500 text-white px-2 py-1 rounded">
          {{ expandedPlaylistId === playlist.id ? '·∫®n' : 'Chi ti·∫øt' }}
        </button>
        <button (click)="onEdit(playlist)" class="bg-yellow-400 px-3 py-1 rounded">S·ª≠a</button>
        <button (click)="onDelete(playlist)" class="bg-red-500 text-white px-3 py-1 rounded">X√≥a</button>
      </div>
    </div>

    <!-- üëá ƒê√¢y l√† ph·∫ßn chi ti·∫øt m·ªü r·ªông -->
    <div *ngIf="expandedPlaylistId === playlist.id" class="mt-3 border-t pt-3 space-y-3">
      <div class="flex gap-4">
        <img
          *ngIf="playlist.imageName"
          [src]="'http://localhost:8080/api/v1/tracks/images/' + playlist.imageName"
          alt="·∫¢nh playlist"
          class="w-24 h-24 object-cover rounded"
        />
        <div>
          <p class="text-gray-700 text-sm"><strong>M√¥ t·∫£:</strong> {{ playlist.description || 'Kh√¥ng c√≥ m√¥ t·∫£' }}</p>
          <p class="text-gray-500 text-xs">T·∫°o b·ªüi: {{ playlist.userEmail }}</p>
        </div>
      </div>

      <div>
        <h4 class="font-semibold text-sm mb-1">Danh s√°ch b√†i h√°t:</h4>
        <ul class="list-disc list-inside text-sm text-gray-800">
          <li *ngFor="let track of playlist.tracks">
            {{ track.nameTrack }} - {{ track.mainArtist }}
          </li>
        </ul>
      </div>
    </div>
  </li>
</ul>

</div>

<!-- Modal -->
<div *ngIf="showForm" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
  <div class="bg-white p-6 rounded shadow-lg w-full max-w-xl">
    <app-playlist-form
      [playlist]="selectedPlaylist"
      (cancel)="onCancel()"
      (saveSuccess)="onSaveSuccess()"
    ></app-playlist-form>
  </div>
</div>

<!-- Modal x√°c nh·∫≠n xo√° -->
<div *ngIf="confirmingPlaylist" class="fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center">
  <div class="bg-white p-6 rounded-lg shadow-lg z-50 max-w-sm w-full">
    <h2 class="text-lg font-semibold mb-4">X√°c nh·∫≠n xo√°</h2>
    <p>B·∫°n c√≥ ch·∫Øc mu·ªën xo√° playlist "<strong>{{ confirmingPlaylist.name }}</strong>"?</p>
    <div class="mt-6 flex justify-end gap-2">
      <button (click)="cancelDelete()" class="px-4 py-2 bg-gray-300 rounded hover:bg-gray-400">H·ªßy</button>
      <button (click)="confirmDelete()" class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700">Xo√°</button>
    </div>
  </div>
</div>
